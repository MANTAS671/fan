<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –¥–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã ‚Äî –°–µ—Ä–¥—Ü–µ –≤ —Ä–∏—Ç–º–µ</title>
  <meta name="theme-color" content="#ff69b4">
  <style>
    :root{
      --bg1:#0f0c29; /* deep space */
      --bg2:#302b63; /* indigo */
      --bg3:#24243e; /* violet */
      --card:#12121bF2;
      --text:#f8f8ff;
      --muted:#b6b6c8;
      --accent:#ff5bbf;
      --accent-2:#7cf1c8;
      --good:#7CFC00;
      --bad:#FF6B6B;
      --shadow:0 20px 40px rgba(0,0,0,.35);
      --radius:22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;
      background: radial-gradient(1000px 600px at 10% 10%, rgba(255,91,191,.12), transparent 60%),
                  radial-gradient(800px 500px at 90% 90%, rgba(124,241,200,.10), transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2) 50%,var(--bg3));
      display:grid; place-items:center; padding:20px;
    }
    .app{width: min(880px, 100%);}
    header{
      display:flex; align-items:center; gap:14px; justify-content:space-between; margin-bottom:18px;
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:54px; height:54px; border-radius:16px; position:relative; overflow:hidden;
      box-shadow: var(--shadow);
      background: conic-gradient(from 180deg, #ff5bbf, #a56bff, #5bf7e8, #ff5bbf);
      display:grid; place-items:center;
    }
    .logo svg{filter:drop-shadow(0 4px 10px rgba(0,0,0,.4))}
    h1{font-size: clamp(22px, 4vw, 32px); margin:0; letter-spacing:.2px}
    .badge{
      font-size:12px; color:var(--text); opacity:.85; padding:6px 10px; border:1px solid rgba(255,255,255,.14);
      border-radius:999px; backdrop-filter: blur(6px); background:rgba(255,255,255,.05)
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero{padding:18px 18px 0}
    .progress{height:10px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden}
    .bar{height:100%; width:0%; background: linear-gradient(90deg, var(--accent), #a56bff); transition: width .35s ease}

    .content{padding:22px}
    .q-title{font-size: clamp(18px, 3.2vw, 24px); margin:0 0 14px; line-height:1.25}
    .options{display:grid; gap:12px}
    .btn{
      width:100%; text-align:left; padding:14px 16px; border-radius:16px; border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.03); color:var(--text); font-size:16px; cursor:pointer; transition:.15s transform ease, .25s background ease;
    }
    .btn:hover{transform: translateY(-1px); background:rgba(255,255,255,.06)}
    .btn[disabled]{opacity:.6; cursor:not-allowed}
    .btn.correct{border-color: rgba(124,252,0,.8); background: rgba(124,252,0,.12)}
    .btn.wrong{border-color: rgba(255,107,107,.7); background: rgba(255,107,107,.10)}

    .meta{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:16px; color:var(--muted); font-size:14px}

    .footer{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; padding:18px; border-top:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.12));
    }
    .cta{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .ghost, .solid{
      border-radius:14px; padding:10px 14px; font-weight:600; border:1px solid rgba(255,255,255,.18); cursor:pointer;
      background:rgba(255,255,255,.04); color:var(--text);
    }
    .solid{ background: linear-gradient(90deg, var(--accent), #a56bff); border:none }

    .hidden{display:none}

    .result{
      text-align:center; padding:26px; display:grid; gap:14px;
      background: radial-gradient(600px 200px at 50% 0%, rgba(255,91,191,.14), transparent 60%);
    }
    .result h2{font-size: clamp(20px, 4vw, 28px); margin:0}
    .result p{margin:0; color:var(--muted)}

    .tag{display:inline-block; font-size:12px; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); margin-right:6px}

    /* Confetti canvas sits on top */
    #confetti{position:fixed; inset:0; pointer-events:none}

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .btn:hover{transform:none}
      .bar{transition:none}
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="app" role="application" aria-label="–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –¥–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12 21s-6-3.5-6-9a6 6 0 1 1 12 0c0 5.5-6 9-6 9Z" stroke="white" stroke-width="1.2"/>
            <circle cx="12" cy="9" r="2.6" fill="white"/>
          </svg>
        </div>
        <div>
          <h1>¬´–°–µ—Ä–¥—Ü–µ –≤ —Ä–∏—Ç–º–µ¬ª ‚Äî –∫–≤–∏–∑ –¥–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã</h1>
          <div class="badge">–ü–æ–∑–∏—Ç–∏–≤ ‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏—è ‚Ä¢ –õ—é–±–æ–≤—å –∫ –º—É–∑—ã–∫–µ</div>
        </div>
      </div>
      <span class="badge" id="attempts">–ü–æ–ø—ã—Ç–∫–∞ ‚Ññ1</span>
    </header>

    <div class="card" id="screen-quiz" aria-live="polite">
      <div class="hero">
        <div class="progress" aria-hidden="true">
          <div class="bar" id="bar" style="width:0%"></div>
        </div>
      </div>
      <div class="content">
        <h2 class="q-title" id="q-title">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞‚Ä¶</h2>
        <div class="options" id="options" role="group" aria-labelledby="q-title"></div>
        <div class="meta"><span id="explain">–ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞</span><span id="counter">0 / 0</span></div>
      </div>
      <div class="footer">
        <div class="cta">
          <button class="ghost" id="skip">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
          <button class="ghost" id="hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
        </div>
        <button class="solid" id="next" disabled>–î–∞–ª—å—à–µ</button>
      </div>
    </div>

    <div class="card hidden" id="screen-result">
      <div class="result">
        <div style="font-size:40px">üíñ‚ú®</div>
        <h2 id="result-title">–°—É–ø–µ—Ä!</h2>
        <p id="result-sub">–¢—ã —Å–∏—è–µ—à—å –∫–∞–∫ –Ω–µ–æ–Ω –Ω–∞–¥ –Ω–æ—á–Ω—ã–º –≥–æ—Ä–æ–¥–æ–º.</p>
        <div>
          <span class="tag" id="tag-accuracy">–¢–æ—á–Ω–æ—Å—Ç—å: 0%</span>
          <span class="tag" id="tag-streak">–°–µ—Ä–¥–µ—á–Ω–∞—è —Å–µ—Ä–∏—è: 0</span>
          <span class="tag" id="tag-time">–í—Ä–µ–º—è: 0—Å</span>
        </div>
      </div>
      <div class="footer">
        <div class="cta">
          <button class="solid" id="share">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
          <button class="ghost" id="copy">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
        </div>
        <button class="ghost" id="again">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
      </div>
    </div>

    <p style="text-align:center; opacity:.8; font-size:12px; margin:14px 6px 0">
      –°–¥–µ–ª–∞–Ω–æ —Å —Ç–µ–ø–ª–æ–º –¥–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã. –ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π —Å—Ç—Ä–∏–º –∑–∞–∂–∏–≥–∞–µ—Ç —Å–µ—Ä–¥—Ü–∞.
    </p>
  </div>

  <script>
    // ------------------------------
    // –î–ê–ù–ù–´–ï –í–û–ü–†–û–°–û–í
    // ------------------------------
    const QUESTIONS = [
      {
        q: "–ö–∞–∫ –∑–≤—É—á–∏—Ç –¥–µ–≤–∏–∑ —ç—Ç–æ–π –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã?",
        a: [
          "–ë–æ–ª—å—à–µ —Å–≤–µ—Ç–∞, –±–æ–ª—å—à–µ —Å–µ—Ä–¥—Ü–∞",
          "–°—Ç—Ä–∏–º–∏–º, –∫–∞–∫ –ø—Ä–∏–¥–µ—Ç—Å—è",
          "–¢–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã, –Ω–∏–∫–∞–∫–æ–π –ª—é–±–≤–∏"
        ],
        correct: 0,
        why: "–î–∞, –º—ã —Ç—É—Ç –∑–∞ —Ç–µ–ø–ª–æ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ."
      },
      {
        q: "–ß—Ç–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑—Ä–∏—Ç–µ–ª—é –Ω–∞ —Å—Ç—Ä–∏–º–µ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã?",
        a: [
          "–ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ —É–ª—ã–±–∫–∞",
          "–¢–æ–∫—Å–∏—á–Ω—ã–π —Å–∞—Ä–∫–∞–∑–º",
          "–°–∫—É—á–Ω–∞—è —Ç–∏—à–∏–Ω–∞"
        ],
        correct: 0,
        why: "–ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ–≥–¥–∞ –≤ —Ç—Ä–µ–Ω–¥–µ, –∞ —É–ª—ã–±–∫–∞ ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –±—É—Å—Ç."
      },
      {
        q: "–ö–∞–∫–æ–π –ø–ª–µ–π–ª–∏—Å—Ç –≤–∫–ª—é—á–∞–µ—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∏?",
        a: [
          "–ü—Ä–æ –ª—é–±–æ–≤—å",
          "–ü—Ä–æ –±—É–¥–∏–ª—å–Ω–∏–∫–∏",
          "–ü—Ä–æ —à—É–º —Å—Ç–∏—Ä–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"
        ],
        correct: 0,
        why: "–ú—É–∑—ã–∫–∞ –ø—Ä–æ –ª—é–±–æ–≤—å ‚Äî –µ—ë —Å—Ç–∏—Ö–∏—è."
      },
      {
        q: "–ö–∞–∫ –ø–æ—Å—Ç—É–ø–∏—Ç—å —Å –æ—à–∏–±–∫–æ–π –≤–æ –≤—Ä–µ–º—è –ø—Ä—è–º–æ–≥–æ —ç—Ñ–∏—Ä–∞?",
        a: [
          "–°–¥–µ–ª–∞—Ç—å –ø–∞—É–∑—É, —É–ª—ã–±–Ω—É—Ç—å—Å—è –∏ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ",
          "–í—ã–∫–ª—é—á–∏—Ç—å –≤—Å—ë –∏ —É–π—Ç–∏ –≤ –ª–µ—Å",
          "–°–ø–æ—Ä–∏—Ç—å —Å —á–∞—Ç–æ–º —Ü–µ–ª—ã–π —á–∞—Å"
        ],
        correct: 0,
        why: "–û—Å–µ—á–∫–∞ ‚Äî –Ω–µ —Ñ–∏–Ω–∞–ª, –∞ –º–æ–º–µ–Ω—Ç –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ —à–∞—Ä–º–∞."
      },
      {
        q: "–ß—Ç–æ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ –≤ –æ–±—â–µ–Ω–∏–∏ —Å –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π?",
        a: [
          "–î–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ –∏ —É–≤–∞–∂–µ–Ω–∏–µ",
          "–°—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑ —ç–º–æ—Ü–∏–π",
          "–ò–≥–Ω–æ—Ä –∑—Ä–∏—Ç–µ–ª–µ–π"
        ],
        correct: 0,
        why: "–°–µ—Ä–¥–µ—á–Ω–æ—Å—Ç—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –º–æ–¥—ã."
      },
      {
        q: "–ö–∞–∫ –Ω–∞–∑–≤–∞—Ç—å —Å—Ç–∏–ª—å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã?",
        a: [
          "–Ø—Ä–∫–∞—è –ª–∏—á–Ω–æ—Å—Ç—å —Å –±–æ–ª—å—à–∏–º —Å–µ—Ä–¥—Ü–µ–º",
          "–¢—É–º–∞–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ",
          "–°–ª—É—á–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä —Å–æ–±—ã—Ç–∏–π"
        ],
        correct: 0,
        why: "–ú—ã –∂–µ —Ç–∞–∫ –∏ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å: —è—Ä–∫–æ –∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É."
      },
      {
        q: "–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –¥–µ–Ω—å –≤—ã–¥–∞–ª—Å—è —Ç—è–∂—ë–ª—ã–º?",
        a: [
          "–ù–µ–Ω–∞–¥–æ–ª–≥–æ –≤—ã–¥–æ—Ö–Ω—É—Ç—å –∏ –≤–∫–ª—é—á–∏—Ç—å –ª—é–±–∏–º—É—é –ø–µ—Å–Ω—é",
          "–°–¥–∞—Ç—å—Å—è –≤ –ø–µ—Ä–≤–æ–π –∂–µ –º–∏–Ω—É—Ç–µ",
          "–°—Ä–∞–≤–Ω–∏—Ç—å —Å–µ–±—è —Å –∏–¥–µ–∞–ª–æ–º –∏–∑ —Å–µ—Ç–∏"
        ],
        correct: 0,
        why: "–ö–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤ + –º—É–∑—ã–∫–∞ —Ç–≤–æ—Ä—è—Ç —á—É–¥–µ—Å–∞."
      },
      {
        q: "–ö–∞–∫–æ–π —Å–∞–º—ã–π —Å–∏–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–µ–¥—É—â–µ–π?",
        a: [
          "–ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç —Å –ª—é–¥—å–º–∏",
          "–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ‚Äò—Å—É–ø–µ—Ä–ª–∞–π–∫‚Äô",
          "–ù–µ–≤–∏–¥–∏–º—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π"
        ],
        correct: 0,
        why: "–ñ–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ —Å–∏–ª—å–Ω–µ–µ –ª—é–±—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤."
      },
      {
        q: "–ö–∞–∫ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –∫—Ä–∏—Ç–∏–∫–µ?",
        a: [
          "–í–∑—è—Ç—å –ø–æ–ª–µ–∑–Ω–æ–µ –∏ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ",
          "–ù–∞–≤—Å–µ–≥–¥–∞ –ø—Ä–µ–∫—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–∏–º—ã",
          "–£—Å—Ç—Ä–æ–∏—Ç—å –±–∏—Ç–≤—É –Ω–∞ 3 —á–∞—Å–∞"
        ],
        correct: 0,
        why: "–§–∏–ª—å—Ç—Ä—É–µ–º, –±–µ—Ä—ë–º –ø–æ –¥–µ–ª—É –∏ –≤–ø–µ—Ä—ë–¥."
      },
      {
        q: "–§–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥: –Ω–∞ —á—Ç–æ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è?",
        a: [
          "–ù–∞ —Å–≤–æ—ë –¥–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ª—é–¥–µ–π",
          "–ù–∞ —Å–ª—É—á–∞–π",
          "–ù–∞ –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –ª–∞–π–∫–∞–º"
        ],
        correct: 0,
        why: "–°–µ—Ä–¥—Ü–µ + –ª—é–¥–∏ = —Å–∏–ª–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–µ—Ä–∂–∏—Ç —ç—Ñ–∏—Ä."
      }
    ];

    // –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}
      return arr
    }

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    const state = {
      idx: 0,
      order: shuffle([...Array(QUESTIONS.length).keys()]),
      answered: false,
      score: 0,
      streak: 0,
      start: performance.now(),
      attempts: Number(localStorage.getItem('alex_quiz_attempts')||'0')
    };
    state.attempts += 1; localStorage.setItem('alex_quiz_attempts', String(state.attempts));

    // –£–∑–ª—ã
    const qTitle = document.getElementById('q-title');
    const options = document.getElementById('options');
    const bar = document.getElementById('bar');
    const counter = document.getElementById('counter');
    const explain = document.getElementById('explain');
    const nextBtn = document.getElementById('next');
    const skipBtn = document.getElementById('skip');
    const hintBtn = document.getElementById('hint');
    const attemptsEl = document.getElementById('attempts');

    const screenQuiz = document.getElementById('screen-quiz');
    const screenResult = document.getElementById('screen-result');

    const resultTitle = document.getElementById('result-title');
    const resultSub = document.getElementById('result-sub');
    const tagAcc = document.getElementById('tag-accuracy');
    const tagStreak = document.getElementById('tag-streak');
    const tagTime = document.getElementById('tag-time');
    const shareBtn = document.getElementById('share');
    const copyBtn = document.getElementById('copy');
    const againBtn = document.getElementById('again');

    attemptsEl.textContent = `–ü–æ–ø—ã—Ç–∫–∞ ‚Ññ${state.attempts}`;

    function render(){
      const total = state.order.length;
      const i = state.order[state.idx];
      const item = QUESTIONS[i];
      qTitle.textContent = item.q;
      options.innerHTML = '';
      const optOrder = shuffle(item.a.map((_,idx)=>idx));
      optOrder.forEach(idx=>{
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = item.a[idx];
        btn.setAttribute('data-idx', idx);
        btn.addEventListener('click',()=>select(idx, item.correct));
        options.appendChild(btn);
      });
      state.answered = false;
      nextBtn.disabled = true;
      bar.style.width = `${(state.idx/total)*100}%`;
      counter.textContent = `${state.idx+1} / ${total}`;
      explain.textContent = '–ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞';
    }

    function select(idx, correct){
      if(state.answered) return;
      state.answered = true;
      const btns = [...options.querySelectorAll('.btn')];
      btns.forEach(b=>b.disabled = true);

      const chosen = btns.find(b => Number(b.getAttribute('data-idx'))===idx);
      const right = btns.find(b => Number(b.getAttribute('data-idx'))===correct);

      if(idx===correct){
        state.score += 1; state.streak += 1;
        chosen.classList.add('correct');
        popConfetti(120);
        explain.textContent = QUESTIONS[state.order[state.idx]].why + `  –°–µ—Ä–∏—è: ${state.streak}.`;
      } else {
        state.streak = 0;
        chosen.classList.add('wrong');
        right.classList.add('correct');
        explain.textContent = '–ù–µ —Å—Ç—Ä–∞—à–Ω–æ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ. ' + QUESTIONS[state.order[state.idx]].why;
      }
      nextBtn.disabled = false;
    }

    nextBtn.addEventListener('click', ()=>{
      const total = state.order.length;
      if(state.idx < total-1){
        state.idx++; render();
      } else {
        showResult();
      }
    });

    skipBtn.addEventListener('click', ()=>{
      if(state.answered) return;
      state.streak = 0; // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–µ—Ä–∏—é –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ
      nextBtn.click();
    });

    hintBtn.addEventListener('click', ()=>{
      const i = state.order[state.idx];
      const tip = QUESTIONS[i].why || '–î–æ–≤–µ—Ä—è–π —Å–µ—Ä–¥—Ü—É.';
      explain.textContent = '–ü–æ–¥—Å–∫–∞–∑–∫–∞: ' + tip;
    });

    function showResult(){
      const total = state.order.length;
      const accuracy = Math.round((state.score/total)*100);
      const seconds = Math.max(1, Math.round((performance.now()-state.start)/1000));

      // —Å–æ–æ–±—â–µ–Ω–∫–∏
      let title = '–¢—ã –æ–≥–æ–Ω—å, –°–∞—à–∞!';
      let sub = '–≠—Ç–æ—Ç –∫–≤–∏–∑ —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—á–µ–≤–∏–¥–Ω–æ–µ: —Å–µ—Ä–¥—Ü–µ —É —Ç–µ–±—è –Ω–∞ –º–∞–∫—Å–∏–º—É–º.';
      if(accuracy===100){
        title = '–ò–¥–µ–∞–ª—å–Ω–æ! üíØ';
        sub = '–ú—É–∑—ã–∫–∞ –ª—é–±–≤–∏, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –¥–æ–±—Ä–æ—Ç–∞ ‚Äî –±–µ–∑—É–ø—Ä–µ—á–Ω–æ–µ –∫–æ–º–±–æ.';
      } else if(accuracy>=70){
        title = '–°–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
        sub = '–ï—â—ë –Ω–µ–º–Ω–æ–≥–æ ‚Äî –∏ –±—É–¥–µ—Ç —á–∏—Å—Ç–∞—è –º–∞–≥–∏—è.';
      } else if(accuracy>=40){
        title = '–•–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ!';
        sub = '–ì–ª–∞–≤–Ω–æ–µ ‚Äî —Ä–∏—Ç–º –∏ —É–ª—ã–±–∫–∞. –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç—è–Ω–µ—Ç—Å—è.';
      } else {
        title = '–ü–µ—Ä–≤—ã–π —à–∞–≥ ‚Äî —É–∂–µ –ø–æ–±–µ–¥–∞';
        sub = '–†–∞—Å—Ç–∏ ‚Äî —ç—Ç–æ —Å—Ç–∏–ª—å. –ù–∞ –ø–æ–≤—Ç–æ—Ä–µ –±—É–¥–µ—Ç –ª—É—á—à–µ.';
      }

      resultTitle.textContent = title;
      resultSub.textContent = sub;
      tagAcc.textContent = `–¢–æ—á–Ω–æ—Å—Ç—å: ${accuracy}%`;
      tagStreak.textContent = `–°–µ—Ä–¥–µ—á–Ω–∞—è —Å–µ—Ä–∏—è: ${state.streak}`;
      tagTime.textContent = `–í—Ä–µ–º—è: ${seconds}—Å`;

      screenQuiz.classList.add('hidden');
      screenResult.classList.remove('hidden');
      popConfetti(250);
    }

    againBtn.addEventListener('click', ()=>{
      // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
      state.idx = 0; state.score = 0; state.streak = 0; state.start = performance.now();
      state.order = shuffle([...Array(QUESTIONS.length).keys()]);
      screenResult.classList.add('hidden');
      screenQuiz.classList.remove('hidden');
      render();
    });

    // –®–∞—Ä–∏–Ω–≥
    function buildShareText(){
      const total = state.order.length;
      const accuracy = Math.round((state.score/total)*100);
      return `–Ø –ø—Ä–æ—à–ª–∞(–µ–ª) –∫–≤–∏–∑ \"–°–µ—Ä–¥—Ü–µ –≤ —Ä–∏—Ç–º–µ\" –¥–ª—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã: ${accuracy}% ‚ù§Ô∏è‚ú®`;
    }

    shareBtn.addEventListener('click', async ()=>{
      const text = buildShareText();
      if(navigator.share){
        try{ await navigator.share({title:'–°–µ—Ä–¥—Ü–µ –≤ —Ä–∏—Ç–º–µ', text}); }catch(e){}
      } else {
        await navigator.clipboard.writeText(text);
        copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        setTimeout(()=>copyBtn.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç', 1500);
      }
    });

    copyBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(buildShareText()); copyBtn.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!'; setTimeout(()=>copyBtn.textContent='–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç', 1500);}catch(e){}
    });

    // –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');
    let confetti = [];
    function resize(){ confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight }
    window.addEventListener('resize', resize); resize();

    function popConfetti(count=120){
      const colors = ['#ff5bbf','#a56bff','#7cf1c8','#ffffff'];
      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random()*confettiCanvas.width,
          y: -10,
          r: 2 + Math.random()*4,
          c: colors[Math.floor(Math.random()*colors.length)],
          v: 1 + Math.random()*3,
          a: Math.random()*Math.PI
        })
      }
    }

    function tick(){
      ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      confetti.forEach(p=>{
        p.y += p.v; p.x += Math.sin(p.a)*0.8; p.a += 0.02;
        ctx.fillStyle = p.c;
        ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
      });
      confetti = confetti.filter(p=>p.y < confettiCanvas.height+10);
      requestAnimationFrame(tick);
    }
    tick();

    // –ó–∞–ø—É—Å–∫
    render();
  </script>
</body>
</html>
